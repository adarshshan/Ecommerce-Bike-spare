{"version":3,"sources":["../src/components/toaster.tsx","../src/core/store.ts","../src/components/toast.tsx","#style-inject:#style-inject","../src/core/styles.css","../src/components/assets.tsx","../src/core/toast.ts"],"sourcesContent":["'use client';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { IToast, ToastState, ToasterProps } from '../core/types';\r\nimport { Store } from '../core/store';\r\nimport { Toast } from './toast';\r\n\r\nconst Toaster = ({ position = 'bottom-right', duration = 3000, style, className }: ToasterProps) => {\r\n  const [toasts, setToasts] = useState<IToast[]>([]);\r\n  const [positionState, setPositionState] = useState<React.CSSProperties>({});\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = Store.subscribe((toast) => {\r\n      setToasts((toasts) => [...toasts, toast]);\r\n      handleToast(toast);\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const [y, x] = position.split('-');\r\n    setPositionState({\r\n      [y]: 0,\r\n      [x]: 0,\r\n    });\r\n  }, [position]);\r\n\r\n  function handleToast(toast: IToast) {\r\n    setTimeout(() => updateToastState(toast, 'idle'), 300);\r\n    setTimeout(() => updateToastState(toast, 'leave'), duration - 100);\r\n    setTimeout(() => removeToast(toast), duration);\r\n  }\r\n\r\n  function updateToastState(toast: IToast, state: ToastState) {\r\n    setToasts((toasts) => {\r\n      var copy = toasts.slice();\r\n      var index = copy.findIndex((x) => x.id === toast.id);\r\n      copy[index] = { ...copy[index], state: state };\r\n      return copy;\r\n    });\r\n  }\r\n\r\n  const removeToast = useCallback(\r\n    (toast: IToast) => setToasts((toasts) => toasts.filter((x) => x.id !== toast.id)),\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <section\r\n      style={{\r\n        position: 'absolute',\r\n        overflow: 'hidden',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: 5,\r\n        padding: 20,\r\n        transform: 'translateY(0)',\r\n        height: 'fit-content',\r\n        transition: 'all 230ms cubic-bezier(.21, 1.02, .73, 1)',\r\n        ...positionState,\r\n      }}\r\n    >\r\n      {toasts.map((toast, index) => (\r\n        <Toast key={index} toast={toast} />\r\n      ))}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport { Toaster };\r\n","import { IToast, ToastType } from './types';\r\n\r\nclass Reducer {\r\n  toasts: Array<IToast>;\r\n  subscribers: Array<(toast: IToast) => void>;\r\n\r\n  constructor() {\r\n    this.toasts = [];\r\n    this.subscribers = [];\r\n  }\r\n\r\n  subscribe(func: (toast: IToast) => void) {\r\n    this.subscribers = [...this.subscribers, func];\r\n    return () => {\r\n      this.subscribers.splice(this.subscribers.indexOf(func), 1);\r\n    };\r\n  }\r\n\r\n  publish(toast: IToast) {\r\n    this.subscribers.forEach((func) => func(toast));\r\n  }\r\n\r\n  add(message: string, type: ToastType) {\r\n    const toast = {\r\n      id: this.toasts.length,\r\n      state: 'enter',\r\n      type: type,\r\n      title: message,\r\n    } as IToast;\r\n\r\n    this.toasts = [...this.toasts, toast];\r\n    this.publish(toast);\r\n  }\r\n}\r\n\r\nexport const Store = new Reducer();\r\n","'use client';\r\nimport React from 'react';\r\nimport { ToastProps } from '../core/types';\r\nimport '../core/styles.css';\r\nimport { ErrorIcon, SuccessIcon } from './assets';\r\n\r\nconst Toast = ({ toast }: ToastProps) => {\r\n  return (\r\n    <div\r\n      className={`toast-${toast.state}`}\r\n      style={{\r\n        paddingTop: '0.5rem',\r\n        paddingBottom: '0.5rem',\r\n        paddingLeft: '1rem',\r\n        paddingRight: '1rem',\r\n        borderRadius: '0.375rem',\r\n        backgroundColor: 'rgb(243, 244, 246)',\r\n        fontWeight: 500,\r\n        fontSize: '0.875rem',\r\n        lineHeight: '1.25rem',\r\n        color: 'rgb(17, 24, 39)',\r\n        zIndex: toast.id,\r\n        display: 'flex',\r\n        gap: 4,\r\n        minWidth: 220,\r\n      }}\r\n      key={toast.id}\r\n    >\r\n      {toast.type === 'success' && SuccessIcon}\r\n      {toast.type === 'error' && ErrorIcon}\r\n      {toast.title}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { Toast };\r\n","\n          export default function styleInject(css, { insertAt } = {}) {\n            if (!css || typeof document === 'undefined') return\n          \n            const head = document.head || document.getElementsByTagName('head')[0]\n            const style = document.createElement('style')\n            style.type = 'text/css'\n          \n            if (insertAt === 'top') {\n              if (head.firstChild) {\n                head.insertBefore(style, head.firstChild)\n              } else {\n                head.appendChild(style)\n              }\n            } else {\n              head.appendChild(style)\n            }\n          \n            if (style.styleSheet) {\n              style.styleSheet.cssText = css\n            } else {\n              style.appendChild(document.createTextNode(css))\n            }\n          }\n          ","import styleInject from '#style-inject';styleInject(\".toast-enter{animation:enterAnimation .35s cubic-bezier(.21,1.02,.73,1) forwards}.toast-leave{animation:leaveAnimation .4s cubic-bezier(.06,.71,.55,1) forwards}@keyframes enterAnimation{0%{transform:translate3d(0,200%,0) scale(.6);opacity:.5}to{transform:translateZ(0) scale(1);opacity:1}}@keyframes leaveAnimation{0%{transform:translateZ(-1px) scale(1);opacity:1}to{transform:translate3d(0,150%,-1px) scale(.6);opacity:0}}\\n\")","import React from 'react';\r\n\r\nconst SuccessIcon = (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" height=\"20\" width=\"20\">\r\n    <path\r\n      fillRule=\"evenodd\"\r\n      d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\"\r\n      clipRule=\"evenodd\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst ErrorIcon = (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" height=\"20\" width=\"20\">\r\n    <path\r\n      fillRule=\"evenodd\"\r\n      d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z\"\r\n      clipRule=\"evenodd\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nexport { SuccessIcon, ErrorIcon };\r\n","'use client';\r\nimport { Store } from './store';\r\n\r\nconst success = (message: string) => {\r\n  Store.add(message, 'success');\r\n};\r\n\r\nconst error = (message: string) => {\r\n  Store.add(message, 'error');\r\n};\r\n\r\nconst defaultToast = (message: string) => {\r\n  Store.add(message, 'default');\r\n};\r\n\r\nconst toast = Object.assign(defaultToast, {\r\n  success: success,\r\n  error: error,\r\n});\r\n\r\nexport { toast };\r\n"],"mappings":"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","names":["React","useCallback","useEffect","useState","Reducer","func","toast","message","type","Store","React","styleInject","css","insertAt","head","style","styleInject","React","SuccessIcon","ErrorIcon","Toast","toast","React","SuccessIcon","ErrorIcon","Toaster","position","duration","style","className","toasts","setToasts","useState","positionState","setPositionState","useEffect","unsubscribe","Store","toast","handleToast","y","x","updateToastState","removeToast","state","copy","index","useCallback","React","Toast","success","message","Store","error","defaultToast","toast"]}